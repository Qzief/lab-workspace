<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-messaging-compat.js"></script>

<script>
  // Konfigurasi Firebase
  const firebaseConfig = {
    apiKey: "AIzaSyD9V0fG_bgxTcgcXQCfVLpvC-kjKeZBsiw",
    authDomain: "arufkuy-login-register.firebaseapp.com",
    projectId: "arufkuy-login-register",
    messagingSenderId: "334457785991",
    appId: "1:334457785991:web:a36fcfad9436c54f4b3222"
  };

  // Inisialisasi Firebase & Messaging
  firebase.initializeApp(firebaseConfig);
  const messaging = firebase.messaging();

  async function initFirebaseMessagingRegistration() {
    try {
      // Daftarkan service worker (dari GitHub Pages kamu)
      const registration = await navigator.serviceWorker.register('https://qzief.github.io/lab-workspace/firebase-messaging-sw.js');
      console.log('‚úÖ Service Worker terdaftar:', registration);

      // Minta izin notifikasi
      const permission = await Notification.requestPermission();
      if (permission !== 'granted') {
        alert('‚ùå Izin notifikasi ditolak.');
        return;
      }

      // Dapatkan token FCM
      const token = await messaging.getToken({
        vapidKey: 'BKSYr7hRk2_CEPxzi1EOWghZlHE7DbF93dpqXzTK9D_TVYHuVCpA9dfSFr-j5jTPrBZa_ypq-E49pJz83hi3G5Y',
        serviceWorkerRegistration: registration
      });

      console.log('üéØ Token FCM:', token);
      alert('üéâ Notifikasi berhasil diaktifkan! Salin token dari console.');

    } catch (err) {
      console.error('‚ùå Error inisialisasi:', err);
    }
  }
</script>

<!-- Tombol aktifkan notifikasi -->
<button onclick="initFirebaseMessagingRegistration()">Aktifkan Notifikasi</button>
